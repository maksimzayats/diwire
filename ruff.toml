line-length = 100

[lint]
select = ["ALL"]
unfixable = ["T201"]
ignore = [
    "D100",
    "D104",
    "D103",
    "D105",
    "D107",
    "ANN401",
    "E501",
    "TC002",
    "TC001",
    "TC003",
]

[lint.per-file-ignores]
"__init__.py" = [
    "F401",  # Module imported but unused
]
"tests/**" = [
    "S101",  # Use of assert detected
    "PT003",
    "ARG001",
    "ARG002",
    "PLR2004",
    "PLR0913",
    "SLF001",
    "D",
    "F841",  # Unused variables (common in context manager tests)
    "SIM117",  # Nested with statements (intentional for testing scope nesting)
    "PLC0415",  # Imports not at top-level (common test pattern)
    "B007",  # Unused loop variable (common in iteration tests)
    "TRY301",  # Abstract raise to inner function
    "TRY003",  # Long exception messages
    "EM101",  # String literal in exception
    "BLE001",
    "N801",   # Class naming (underscore convention for test clarity)
    "PT012",  # pytest.raises with multiple statements (cleanup testing)
    "ANN202",
    "ANN001",
    "ANN002",
    "ANN003",
    "PLR0206",
]
"examples/**" = [
    "D",  # Examples are educational code, not API docs
    "T201",  # Print statements (intentional for demo output)
    "ERA001",  # Commented-out code (example code for users)
    "INP001",
    "S106",
    "S311",
    "S608",
    "N999",    # Invalid module names (numbered files intentional)
    "ANN",     # Missing type annotations (educational code)
    "ARG001",  # Unused function argument
    "ARG002",  # Unused method argument
    "TRY003",  # Long exception messages
    "EM101",   # String literal in exception
    "RUF012",  # Mutable class attributes (ClassVar not needed)
    "PLR2004", # Magic values
    "PLC0415", # Imports not at top-level
    "SLF001",  # Private member access
]
"src/diwire/container.py" = [
    "PLR0913",  # Too many arguments (DI wrappers need context)
    "C901",  # Too complex (resolve method handles many cases by design)
    "PLR0911",  # Too many return statements
    "PLR0912",  # Too many branches
    "TRY300",  # Statement in try block (intentional early return pattern)
    "FBT001",  # Boolean positional argument (is_async param)
]
"benchmarks/**" = [
    "S101",     # Use of assert detected (normal in benchmarks)
    "ARG001",   # Unused function argument
    "ARG002",   # Unused method argument
    "PLR2004",  # Magic value used in comparison
    "PLR0913",  # Too many arguments
    "SLF001",   # Private member access
    "D",        # All docstring rules
    "PLC0415",  # Imports not at top-level (fixture pattern)
    "ANN201",   # Missing return type (fixtures)
    "RUF022",   # __all__ not sorted (organized by library)
    "EM101",    # String literal in exception
    "N801",     # Class naming (intentional underscores for chain levels)
]
"src/diwire/compiled_providers.py" = [
    "D102",   # Missing docstring in __call__ (protocol implementations)
    "ARG002", # Unused method argument (protocol signature requirement)
    "PLC0415",  # Deferred asyncio import for performance
]

[lint.isort]
combine-as-imports = true

[lint.flake8-tidy-imports]
ban-relative-imports = "all"

[format]
quote-style = "double"
indent-style = "space"
docstring-code-format = true

[lint.flake8-pytest-style]
fixture-parentheses = true
mark-parentheses = false
